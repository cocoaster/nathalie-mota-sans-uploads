jQuery(document).ready(function($){let totalPhotos=0;let loadedPhotos=0;function loadPhotos(){let category=$('#category-filter').val()||'';let format=$('#format-filter').val()||'';let order=$('#order-filter').val()||'DESC';let data={action:'filter_photos',category:category,format:format,order:order,};$.post(nathalie_mota_ajax.url,data,function(response){console.log('Réponse du serveur:',response);$('#photo-list').html(response.html);totalPhotos=response.total;loadedPhotos=$('#photo-list .photo-item').length;addLightboxEvents();},'json').fail(function(jqXHR,textStatus,errorThrown){console.error('Error: '+textStatus,errorThrown);});}
$('#category-filter, #format-filter, #order-filter').change(function(){loadPhotos();});$('#load-more').click(function(){let offset=$('#photo-list .photo-item').length;if(loadedPhotos>=totalPhotos){$(this).hide();return;}
let category=$('#category-filter').val()||'';let format=$('#format-filter').val()||'';let order=$('#order-filter').val()||'DESC';let data={action:'load_more_photos',offset:offset,category:category,format:format,order:order,};$.post(nathalie_mota_ajax.url,data,function(response){console.log('Réponse du serveur (Load More):',response);$('#photo-list').append(response.html);loadedPhotos+=response.loaded;addLightboxEvents();},'json').fail(function(jqXHR,textStatus,errorThrown){console.error('Error: '+textStatus,errorThrown);});});loadPhotos();});